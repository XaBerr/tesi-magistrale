\lvli{Quantum key distribution}
\lvlii{Introduction}
The security of telecommunication systems is typically ensured by cryptographic protocols that are based on computational assumptions. For example, the complexity of factorizing large prime numbers is at the basis of the RSA public-key cryptosystem. However, this technique will be irremediably compromise with the arrival of quantum computers \cite{a1,a2,a3}, which can provide an exponential speedup \cite{a4} in performing complex computational tasks, as factorizing prime numbers. Quantum Key Distribution (\idx{QKD}), once paired with the symmetric cryptosystem called One Time Pad (\idx{OTP}), offers a solution to this issue, since the security of the key generation process is guaranteed by physical laws such as monogamy and no cloning theorem \cite{a5}.
Since the first QKD protocol was introduced in 1984 \cite{a6}, theoretical developments of security proofs and protocols have led to refined schemes that guarantee security even if devices are not completely safe or trust, as in the device independent framework \cite{a5,a6,a7,a8,a9,a10,a11}.
From the experimental point of view, we can divide QKD into two main branches distinct by the medium in which the quantum communication (that is the exchange of photons) takes place: via fiber, via free-space. This last one can take place via both horizontal and vertical links (via satellite). At the moment free-space QKD is less developed with respect its fiber-based counterpart, because it has to face additional issues, such as the use of telescopes, the presence of atmospheric turbulence and strong environmental noise. In this regards the Quantum Future research group of DEI department is deeply focused in free-space quantum communication technologies, in particular along satellite links. For instance, they reported on different feasibility studies realized in collaboration with the Italian Space Agency \cite{a12,a13,a14}. An important milestone in satellite QKD has been reached by China through the launch of the first QKD satellite in 2016 called Micius \cite{a15}, and many other research groups around the world are developing dedicated satellites \cite{a16,a17,a18}. The long-term aim of quantum communication is achieving one day the Quantum Internet \cite{a19} on a global scale, which require two conditions to be fulfilled. The first will be an integration between classical and quantum communication in the same physical channel (fiber and/or free-space), and the second one is the hybridization of the network, which must support both free-space and fiber-based channels. For example, it could be built small-scale centralized fiber distribution stations, and the connectivity between these small-scale networks will be left to free-space communication that presents long-scale characteristics.


\lvlii{The theory behind QKD}
\lvliii{Qubit}
Quantum communication is based on the qubit. A classical bit (\idx{bit}) can stays in only two states and it is represented by $0$ or $1$, in contrast a quantum bit (\idx{qubit}) can stays in one of the states generated by  a basis of the Hilbert space.
For example, the two dimensional Hilbert space can be generated by the vectors $\left|0\right> = \begin{bmatrix} 1 \\ 0 \\ \end{bmatrix}, \left|1\right> = \begin{bmatrix} 0 \\ 1 \\ \end{bmatrix}$ and a generic state can be expressed as a super position of the two $\left|\psi\right> = \alpha\left|0\right> + \beta\left|1\right>$, where the complex amplitudes $\alpha, \beta$ must respect the normalization $\left<\psi|\psi\right> = |\alpha|^2 + |\beta|^2 = 1$.
The qubit seems to have infinite possibility of output but when measured can take only two values $0$ or $1$ as the bit, this because $\alpha, \beta$ represent the amplitude probability of outcome. For istance, a measure of the qubit $\left|\psi\right>$ in the basis $\{\left|0\right>, \left|1\right>\}$ produce the $0$ with probability $p(0) = |\left<\psi|0\right>|^2 = |\alpha|^2$ and the $1$ with probability $p(1) = |\left<\psi|1\right>|^2 = |\beta|^2$. What is infinite is the possibility to choose the bases of measurement, in fact there are infinite possibility of choosing two orthonormal vectors in the two dimensional Hilbert space.

\lvliii{Photons}
In the quantum optic theory, light is the sum of indivisible particles called \idx{photons}. The photons are important for quantum communication because the qubit information can be carried into a single photon. The qubit can be encoded in two main ways: polarization and time bin.

\idx{Polarization encoding} takes advantage of the polarization of the single photon. Polarization is a property applying to transverse waves that specifies the geometrical orientation of the oscillations. The electromagnetic waves propagate according the Helmholtz equations and the simpler solutions for the Helmholtz equations are the plane waves, the higher solution can be expressed as a superposition of plane waves \cite{a21}. In general, the polarization of a plane wave refers to the orientation of the electric field vector that can be expressed as a super position of two vectors of the basis, in the specific case of a plane propagating in the $\hat{z}$ direction can be written as $\vec{E} = (a_x \hat{x} + a_y \hat{y} e^{i \varphi}) e^{i \phi} e^{i k z}$. The polarization can be expressed by a Jones's vector $\hat{P} = \begin{bmatrix} a_x \\ a_y e^{i\varphi} \\ \end{bmatrix}$ that it is in a space with the same characteristic of the Hilbert one.

\idx{Time bin encoding} is obtained by sending a photon through a Mach-Zehnder interferometer (MZI). In the MZI the photon can take one of the two paths, one path $\left|1\right>$ is designed longer than the other one $\left|0\right>$ by a length bigger than the coherence length. The final state can be expressed as a superposition of the two possibilities $\left|\psi\right> = \frac{1}{\sqrt{2}} (\left|0\right> + e^{i\theta}\left|1\right>)$ where $e^{i \theta}$ represent the additional phase accumulated in the longer path. In this way, by varying the phase it is possible to change the state \cite{a22}.

Another important aspect of the photon is its indivisibility, this was demonstrated for the first time in the 1987 \cite{a23}. Indivisibility locks the information in a unique spot so the only way that one has to duplicate its information is to duplicate the entire photon. Here came the second aspect of the photon, it cannot be copied because doesn't exist a linear operator that do so. The demonstration is really immediate, consider: a generic input state $\left|\psi\right>$, an ancilla for the copy $\left|0\right>$, and a machine state $\left|\Phi\right>$. They form a unique state $\left|\psi\right>\left|0\right>\left|\Phi\right> =: \left|\psi 0 \Phi\right>$, where the copy-operator for the two vectors of the basis $\{\left|0\right>, \left|1\right>\}$ must follow:

$\left|0 0 \Phi\right> \to \left|0 0 \Phi\right>$,

$\left|1 0 \Phi\right> \to \left|1 1 \Phi\right>$.

This operator does not satisfy linearity:

$\left|\psi 0 \Phi\right> = \alpha\left|0 0 \Phi\right> + \beta\left|1 0 \Phi\right> \to \alpha\left|0 0 \Phi\right> + \beta\left|1 1 \Phi\right> \ne \left|\psi \psi \Phi\right>$.


\lvliii{BB84}

The first quantum distribution protocol \idx{BB84} \cite{a9} was devised in 1984 by Charles H. Bennett and Gilles Brassard, it requires the use of a public and authenticated classical channel and a quantum channel. The strength of this protocol lies in the fact that non-orthogonal single-photon symbols are used for data transmission, so that any eavesdropper who starts listening to the channel is forced to consume the photon to read the state. Once consumed, the eavesdropper is not able to reproduce it perfectly and so introducing an error in the system. In other words, the security of the channel can be determined by the number of errors obtained in the communication itself. Because this protocol requires to send a random sequence of symbols this cannot be used to share data but only for generate secret keys that will be used to encode the data. This process is called quantum key distribution QKD. The safest way to communicate using keys is to divide the data in messages, for each message encrypt it with a random string (key) and then discard that key. In this way, every message became a random message that only who knows the key can decrypt, this procedure is called one time pad.

The functioning details of this protocol are very important to understand the others protocols because they are all variations around the same concept. In this protocol a transmitter called \idx{Alice} and a reciver called \idx{Bob} want to communicate using the following steps:

- Alice and Bob decide to use two non-orthogonal bases, for example $B_1 = \{\left|0\right>, \left|1\right>\}$ and $B_2 = \{\left|D\right>, \left|A\right>\}$ where $\left|D\right> = \frac{1}{\sqrt{2}} (\left|0\right> + \left|1\right>)$ and $\left|A\right> = \frac{1}{\sqrt{2}} (\left|0\right> - \left|1\right>)$;
- Alice send a sequence of qubits randomly chosen from the four vectors of the bases;
- for each qubit, Bob choose at random a basis and measure it typically with positive-operator valued measure (POVM) and it get a sequence of $0$ or $1$;
- then Alice and Bob share in the authenticated classical channel the bases choice;
- they keep only the bits of the matching bases and discard the others because they are sure of the outcome. They get two partially correlated sequences of symbols called \idx{sifted key};
- at this point they do a classical post-processing to be sure no errors are introduced by the channel, so if everything is worked, they share a unique secret key.

The strength of this protocol appears when a third person Eve tries to read the data in the channel. Because the hole information of the qubit is encoded into a single photon that cannot be divided or copied, she must measure it. She can do only one measure per photon because a sequence of measurements does not commutate. When Eve measure the photon, she must guess a basis for the measure and send another photon to Bob with the corresponding guessed state. Doing so Eve introduce an error that Alice and Bob can estimate because it is additional to the typical one introduced by the channel. If the error introduced is too high, they must discard all bits and start again, else they have the \textit{sifted key} that are partially correlated and partially secret. As before, they do a classical post-processing to remove the error and they get a unique key that it is still partially secret because Eve has read some qubit correctly. To remove the partial information that Eve has in the secret key, Alice and Bob do an operation called \idx{privacy amplification}. They want to remove the bits that Eve know but they didn't know which are so they discard some bits using a hash function. Now they have unique secret key.

This protocol needs some conditions to communicate:

- Eve cannot intrude into Alice’s and Bob’s devices because this protocol guarantees a safety on the channel, if Eve reads inside the devices it becomes a problem of safety of the devices;
- Alice and Bob must trust the random number generators, if not Eve can study the statistical distribution of the source and improve its predictions;
- the classical channel is authenticated otherwise Eve can pass itself off as Bob and the communication would no longer be between Alice and Bob but between Alice and Eve;
- devices are trusted and characterized, the further away the devices are from theoretical operation more information Eve manages to recover.

If the conditions have been met the only attacks Eve can do are:

- individual attack: Eve attacks each of the systems going from Alice to Bob independently of all others, using the same strategy. Eve must measure her ancillas before the classical postprocessing;
- collective attack: Eve can keep her ancillas in a quantum memory until the end of the classical postprocessing and perform collective measurements;
- coherent attack: no limits to fantasy. In many cases the bound is the same as for collective attacks.

The best attack Eve can do is \textit{collective attack} where the maximum information rate she can get is  $I_{AE} = \max_{Eve} \chi(A:E)$ where $\chi(A:E)$ is the \textit{Holevo bound} \cite{a24}. The secret information rate shared between Alice and Bob is the hole information rate between them minus the Eve's information rate where in the worst case is $r = I_{AB} - I_{E}$. The mutual information rate between Alice and Bob can be expressed as total rate minus the error entropy $I_{AB} = 1 - h_2(Q)$ where $h_2(Q)$ is the binary entropy of the quantum bit error rate (QBER) \cite{a24}. Eve can gain information only at the expense of introducing an error, so the information gained is proportional of the error introduced $I_E = f h_2(Q)$. The total rate of secret information is then $r = 1 - h_2(Q) - f h_2(Q)$ and is called \idx{secret key rate}. This last parameter is what allows us to make the estimates described in the procedure above.

\lvliii{Fiber}

The simpler way to communicate with QKD is via fiber because the technology of this sector is very developed, so the costs are not high, and the channel is relatively constant. The single-photon source is difficult to realize and therefore it is preferred to use an \textit{attenuated phase-randomized} laser pulse. The laser is important for this type of communication because its pulse generate a coherent state $\left|\alpha\right> = e^{- |\alpha|^2 / 2} \sum_{n=0}^{+\infty} \frac{\alpha^n}{\sqrt{n!}} \left|n\right>$ that have an average number of photons of $\bar{n} = |\alpha|^2$. The average number $\bar{n}$ can be controlled by attenuation. Having a very low $\bar{n}$ is different from having a single photon because this allow Eve the possibility of \textit{photon number splitting attacks} \cite{a24}. The pulses after being generated are sent into a symbol encoding system (time-bin, polarization) before being sent into the fiber, which is usually the telecom standard fiber.

There are three effects that characterize the fiber: losses, chromatic dispersion, polarization mode dispersion. \idx{Fiber losses} are due to random scattering processes and depend therefore exponentially on the length $t = 10^{-\alpha l / 10}$ where $\alpha$ is the attenuation coefficient and it is typically $\alpha(\lambda = 1550[nm]) \approx 0.2 [dB / km]$. The attenuation coefficient depends from intrinsic or extrinsic properties. Intrinsic properties are electrons transition, molecule agitations, and Rayleigh scattering. Extrinsic properties are contamination of $OH^-, H_2$, bending, micro-bending, and leakage due to modes coupling. \idx{Chromatic dispersion} $\beta_2$ is a nonlinear effect that is generated by the dependence of the traveling velocity of the singular wavelength $\beta(w) \approx \beta_0 + \beta_1 w + \frac{1}{2} \beta_2 w^2$. This parameter depends on fiber profile, fiber material and guide mechanism. Polarization mode dispersion \idx{PMD} generate different delays for the polarization's components. The entering pulse is decompose in the two principal states of polarization (PSP) in a \textit{birefringent way}, this components has two different delays. This effectis caused by a symmetry break of the geometry of the fiber, so the two modes $LP_{01}^x$ and $LP_{01}^y$ are no longer degenerative.

In general, all three of these characteristics impose a maximum reachable distance-constraint regarding fiber communication especially for PMD and attenuation. All fiber-based implementations of quantum communication have to face PMD. This is clearly true for polarization encoding but it is equally a concern for the time-bin encoding because the interferometer depends on the polarization \cite{a25}. The attenuation is another big problem because unlike the classic communications where the intensity of the impulse sent can be increased, here the single-photon regime forbids it, and largely reduces the maximum communication distance.

When the pulse leaves the fiber, it will be sent to the decoding system which it will converted into a pair "bit and base" used in the communication.

\lvliii{Satellite}

In QKD both fiber communication and the free-space grount-to-ground communication have a much shorter maximum link-distance than satellite communication. The first one is due to attenuations, and the second one is due to curvature of the earth and fluctuations of the low atmosphere. It would be preferable to use satellite communication for long range links \cite{a14}.

The composition of the atmosphere offers an excellent transmission window around $770 [nm]$ which is very close to the $800 [nm]$ of the typical telecommunication window. In this band it does not present any birefringent behavior and therefore does not have PMD.

Unlike fiber, free-space has no spatial confinement and therefore has beam divergence problems. For reference, a gaussian-beam laser that illuminates a geostationary orbit from earth $r \approx 36000[km]$ with a beam waste of $w_0 \approx 10 [cm]$, produce a spot with diameter $d \approx r \theta \approx 88 [m]$, where $\theta = \frac{\lambda}{\pi w_0}$ is the gaussian-beam divergence. Non-confinement makes the channel easily influenced by external noises such as sun and moon emissions. This problem can be mitigated by introducing spatial, temporal and spectral filters to try to confine the channel. New studies are trying to change the wavelength from 800nm to 1550nm to mitigate this problem.

Another disadvantage is that the medium in which the light propagates depends on the atmospheric conditions of the moment. In other words, the channel has strong attenuation in case of fog, rain, clouds, and in the case of turbulent motions it can create jittering and beam wandering \cite{a25}.

Another feature that makes free-space difficult for communication is that it requires one of the two components to be mounted on a satellite. This is a higher difficulty level than fiber because it requires additional monetary investments for the launch a satellite and additional complexity to control a satellite in orbit.

\lvlii{The requirements of QKD}
\img{QKD}{The requirements of QKD: PAT, Synchro, and Telecom.}
Typical free-space systems used to implement the BB84 decoy-state share the logical structure sketched in \fig{QKD}. The three logic units necessary to implement the BB84 decoy-state protocol in a free-space channels are a Pointing-Acquisition-Tracking (\idx{PAT}) system, a Synchronization (\idx{Synchro}) system and a \idx{Telecom} interface between Alice and Bob.

The PAT system is in charge of allowing Alice and Bob to send and receive the quantum signals over the free-space channel. It is usually comprised of a transmitting and a receiving telescope and a close-feedback pointing system to keep the two telescope aligned one with respect to the other.

The Synchro unit is in charge of the real-time timing of the protocol. It controls the lasers and tag the detections, allowing Alice and Bob to compare their raw bit strings a posteriori. It is worth noticing that the pulsed laser used for synchronization can be used also as a beacon for the PAT system.

The Telecom unit is in charged of the (authenticated) classical communication between the two terminals. It allows the raw-key exchange to the other post-processing phases, the basis-reconciliation (or sifting), and error-correction and privacy-amplification \cite{a9}.

In this thesis it will be explained how to implement the PAT system.